
@{
    ViewBag.Title = "Nakliye";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div id="jCrumbs" class="breadCrumb module">
    <ul>
        <li>
            <a href="#">
                <i class="glyphicon glyphicon-home"></i>
            </a>
        </li>
        <li style="background: none;">
            <span style="width: 40px;"><a href="#" style="width: 83px;">Satış</a></span>
            <div class="chevronOverlay" style="display: block;"></div>
        </li>
        <li>
            Nakliye
        </li>
    </ul>
</div>

<div class="row">
    <button id="btn-execute" class="btn btn-default btn-etiket float-left heading" style="position: relative; left: 13px;">
        <i class="fa fa-check"></i>
        Yürüt
    </button>

    <div class="col-sm-12 col-md-12" style="margin-top:30px">
        <h3 class="heading">
            <button id="download-xlsx" class="btn btn-default btn-etiket" href="#" style="position: relative; bottom: 41px;">
                <img src="~/img/xls.png" />
                <span class="font-size-13">Excel'e Aktar</span>
            </button>
        </h3>
    </div>

    <div class="col-sm-12 col-md-12">
        <div class="col-sm-6">
            <form>
                <div class="form-group row">
                    <label class="col-sm-2 col-form-label">Nakliye Durumu :</label>
                    <div class="col-sm-3">
                        <select id="drpOrderState" class="form-control js-example-basic-single">
                            <option value="ACIK">ACIK</option>
                            <option value="KAPALI">KAPALI</option>
                            <option value="TUMU">TUMU</option>
                        </select>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <div class="col-sm-12" style="margin-top:40px">
        <div class="heading">
        </div>
    </div>

    <div class="col-sm-12 col-md-12">
        <div class="pane">
            <table class="table table-striped table-bordered dTableR" id="tblShipment" style="width:100%">
                <thead>
                    <tr>
                        <th class="center">#</th>
                        <th class="center">Nakliye Durumu</th>
                        <th class="center">Nakliye Durumu</th>
                        <th class="center">Nakliye No</th>
                        <th class="center">Cari</th>
                        <th class="center">Sürücü</th>
                        <th class="center">Telefon</th>
                        <th class="center">Araç Plakası</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>

        <div class="pane" style="margin-top:20px">
            <table class="table table-striped table-bordered dTableR" id="tblShipRows" style="width:100%">
                <thead>
                    <tr>
                        <th class="center">Nakliye No</th>
                        <th class="center">İrsaliye Tarihi</th>
                        <th class="center">İrsaliye No</th>
                        <th class="center">İrsaliye Kalemi</th>
                        <th class="center">Sipariş No/Kalem</th>
                        <th class="center">Malzeme</th>
                        <th class="center">Tanım</th>
                        <th class="center">Uzun Tanım</th>
                        <th class="center">Miktar</th>
                        <th class="center">Müşteri</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
    </div>
</div>


@section Scripts{
    <script type="text/javascript">
        $(function () {
            $('.js-example-basic-single').select2();
            $("#download-xlsx").prop("disabled", true);

            $("#tblShipment").DataTable();
            $('#tblShipRows').DataTable();

            @*var table = $("#tblShipment").DataTable({
                language: {
                     url: "@Url.Content("~/Content/tr.json")",
                },
                ajax:
                {
                    url: '@Url.Action("GetData")',
                    type: "POST",
                    dataType: 'json',
                    data: function (d) {
                        var customer = JSON.parse(sessionStorage.getItem("Customer"));
                        console.log(customer)
                        d.iv_kunnr = customer.SapCode;
                    },
                    dataSrc: function (json) {
                        console.log(json.data)
                        return json.data;
                    }
                },
                retrieve: true,
                autoWidth: false,
                displayLength: 5,
                columns: [
                    //{
                    //    width: "50px",
                    //    render: function (data, type, row) {
                    //        if (row.CMPT_ABGRU == "ACIK") {
                    //            return `<i class="splashy-information"></i>`;
                    //        }
                    //        else {
                    //            return `<i class="splashy-check"></i>`;
                    //        }
                    //    }
                    //},
                    //{ data: 'CMPT_ABGRU', width: "50px" },
                    { data: 'TKNUM' },
                    { data: 'KUNAGTANIM' },
                    { data: 'SURUCU' },
                    { data: 'TELEFON' },
                    { data: 'PLAKA' }
                ],
                //columnDefs: [
                //    { className: 'dt-center', targets: [0, 1, 2,5,6] }
                //],
                initComplete: function (settings, json) {
                    $("#btn-execute").prop("disabled", false);
                }
            });*@

            //table.on('xhr', function (e, settings, json, xhr) {
            //    $("#btn-execute").prop("disabled", false);
            //    $("#download-xlsx").prop("disabled", false);

            //    //$('#drpOrderState option:first').prop('selected', true);
            //    //$('#drpOrderState').trigger('change');

            //    //$('#drpOrderState').prop('disabled', false)
            //    //                  .trigger('change.select2');
            //});





        });
    </script>
}

